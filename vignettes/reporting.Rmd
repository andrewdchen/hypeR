---
title: "Generating Reports"
vignette: >
  %\VignetteIndexEntry{Generating Reports}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include=FALSE, messages=FALSE, warnings=FALSE}
knitr::opts_chunk$set(
    comment = "#>",
    fig.align="center",
    fig.width=8.75,
    cache = FALSE)
devtools::load_all("/Users/anthonyfederico/GitHub/hypeR")
```

### Multiple experiments
Sometimes, we are generating reports for multiple signatures across multiple experiments. Typically, the best way to manage this data is to process it all at once and generate a markdown report to analyze ourselves or share with collaborators.
```{r}

signatures <- readRDS(system.file("extdata/signatures.rds", package="hypeR"))
project <- signatures$project

```

```{r}

names(project)
names(project[[1]])
head(project[[1]][[1]])

```

### Example genesets
Here we use an genesets example from [REACTOME](https://reactome.org/).
```{r}

gsets <- readRDS(system.file("extdata/gsets.rds", package="hypeR"))
gsets <- gsets$REACTOME

```

### Hyper enrichment
All workflows begin with performing hyper enrichment with `hypeR`.
```{r}

lmultihyp_obj <- lapply(project, function(x) hypeR(x, gsets, bg=35423))

```

```{r}

names(lmultihyp_obj)
print(lmultihyp_obj[[1]])

```

### Markdown reports
`hyp_to_rmd` will accept multiple formats, including a single `hyp` or `multihyp` object as well as a list of either, including a list of `hyp` or `multihyp` objects together. When a list of `multihyp` objects are passed for example, each experiment will become its own section, while each signature becomes its own tab within that section. Lists of keyword arguments can be passed for `hyp_plot`, `hyp_emap`, and `hyp_hmap`, allowing customization of their functionality per report.
```{r, eval=FALSE}

hyp_to_rmd(lmultihyp_obj,
           file_path="hyper-enrichment.rmd",
           title="Hyper Enrichment (hypeR)",
           subtitle="YAP, TNF, and TAZ Knockout Experiments",
           author="Anthony Federico, Stefano Monti",
           show_plots=T,
           show_emaps=T,
           show_hmaps=T,
           show_tables=T)

```
